<aside class="sidebar">
    <button type="button" class="sidebar-close-btn">
        <iconify-icon icon="radix-icons:cross-2"></iconify-icon>
    </button>
    <div>
        <a href="{% url 'index' %}" class="sidebar-logo">
            <img src="/static/images/logo-dark.png" alt="site logo" class="light-logo">
            <img src="/static/images/logo-light.png" alt="site logo" class="dark-logo">
            <img src="/static/images/logo-icon.png" alt="site logo" class="logo-icon">
        </a>
    </div>
    <div class="sidebar-menu-area">
        <ul class="sidebar-menu" id="sidebar-menu">
            <li>
                <a href="{% url 'dashboard' %}">
                    <iconify-icon icon="solar:home-smile-angle-outline" class="menu-icon"></iconify-icon>
                    <span data-i18n="sidebar.dashboard">Dashboard</span>
                </a>
            </li>
            
            <!-- Organizations Menu - visible based on role -->
            {% if is_owner or user.is_superuser %}
            <li class="dropdown">
                <a href="javascript:void(0)">
                    <iconify-icon icon="mdi:domain" class="menu-icon"></iconify-icon>
                    <span data-i18n="sidebar.organization">Organization</span>
                </a>
                <ul class="sidebar-submenu">
                    <li>
                        <a href="{% url 'center_list' %}"><i class="ri-circle-fill circle-icon text-primary-600 w-auto"></i> <span data-i18n="sidebar.centers">Companies</span></a>
                    </li>
                    <li>
                        <a href="{% url 'branch_list' %}"><i class="ri-circle-fill circle-icon text-info-main w-auto"></i> <span data-i18n="sidebar.branches">Branches</span></a>
                    </li>
                    {% if permissions.can_manage_staff or permissions.can_view_staff %}
                    <li>
                        <a href="{% url 'staff_list' %}"><i class="ri-circle-fill circle-icon text-success-main w-auto"></i> <span data-i18n="sidebar.staff">Staff</span></a>
                    </li>
                    {% endif %}
                    {% if user.is_superuser %}
                    <li>
                        <a href="{% url 'role_list' %}"><i class="ri-circle-fill circle-icon text-warning-main w-auto"></i> <span data-i18n="sidebar.rolesPermissions">Roles & Permissions</span></a>
                    </li>
                    {% endif %}
                </ul>
            </li>
            {% elif is_manager or permissions.can_view_staff or permissions.can_manage_staff %}
            <li class="dropdown">
                <a href="javascript:void(0)">
                    <iconify-icon icon="mdi:domain" class="menu-icon"></iconify-icon>
                    <span data-i18n="sidebar.myBranch">My Branch</span>
                </a>
                <ul class="sidebar-submenu">
                    <li>
                        <a href="{% url 'branch_list' %}"><i class="ri-circle-fill circle-icon text-info-main w-auto"></i> <span data-i18n="sidebar.branchInfo">Branch Info</span></a>
                    </li>
                    {% if permissions.can_manage_staff or permissions.can_view_staff %}
                    <li>
                        <a href="{% url 'staff_list' %}"><i class="ri-circle-fill circle-icon text-success-main w-auto"></i> <span data-i18n="sidebar.staff">Staff</span></a>
                    </li>
                    {% endif %}
                </ul>
            </li>
            {% endif %}
            
            <li>
                <a href="{% url 'usersList' %}">
                    <iconify-icon icon="flowbite:users-group-outline" class="menu-icon"></iconify-icon>
                    <span data-i18n="sidebar.users">Customers</span>
                </a>
            </li>
             <li>
                <a href="{% url 'ordersList' %}">
                    <iconify-icon icon="solar:bag-4-bold" class="menu-icon"></iconify-icon>
                    <span data-i18n="sidebar.orders">Orders</span>
                </a>
            </li>
            {% if permissions.can_manage_products or user.is_superuser %}
            <li class="dropdown">
                <a href="javascript:void(0)">
                    <iconify-icon icon="ri-star-line" class="menu-icon"></iconify-icon>
                    <span data-i18n="sidebar.services">Services</span>
                </a>
                <ul class="sidebar-submenu">
                    <li>
                        <a href="{% url 'categoryList' %}"><i class="ri-circle-fill circle-icon text-primary-600 w-auto"></i> <span data-i18n="sidebar.categories">Categories</span></a>
                    </li>
                    <li>
                        <a href="{% url 'productList' %}"><i class="ri-circle-fill circle-icon text-warning-main w-auto"></i> <span data-i18n="sidebar.products">Products</span></a>
                    </li>
                </ul>
            </li>
            {% endif %}
            
            <!-- Analytics Section - Permission-based visibility -->
            {% if permissions.can_view_reports or permissions.can_view_analytics or permissions.can_view_financial_reports or user.is_superuser or is_staff_member %}
            <li class="sidebar-menu-group-title" data-i18n="sidebar.analyticsReports">Analytics & Reports</li>
            
            <!-- My Statistics - Visible to all staff members (their own stats) -->
            {% if is_staff_member %}
            <li>
                <a href="{% url 'my_statistics' %}">
                    <iconify-icon icon="solar:chart-bold" class="menu-icon"></iconify-icon>
                    <span data-i18n="sidebar.myStatistics">My Statistics</span>
                </a>
            </li>
            {% endif %}
            
            <!-- Sales & Finance Dashboards - Permission-based -->
            {% if permissions.can_view_reports or permissions.can_view_analytics or user.is_superuser %}
            <li class="dropdown">
                <a href="javascript:void(0)">
                    <iconify-icon icon="solar:wallet-money-bold-duotone" class="menu-icon"></iconify-icon>
                    <span data-i18n="sidebar.dashboards">Dashboards</span>
                </a>
                <ul class="sidebar-submenu">
                    {% if permissions.can_view_reports or permissions.can_view_analytics or user.is_superuser %}
                    <li>
                        <a href="{% url 'sales' %}"><i class="ri-circle-fill circle-icon text-primary-600 w-auto"></i> <span data-i18n="sidebar.salesDashboard">Sales Overview</span></a>
                    </li>
                    {% endif %}
                    {% if permissions.can_view_financial_reports or permissions.can_view_analytics or user.is_superuser %}
                    <li>
                        <a href="{% url 'finance' %}"><i class="ri-circle-fill circle-icon text-success-main w-auto"></i> <span data-i18n="sidebar.financeDashboard">Finance & Payments</span></a>
                    </li>
                    {% endif %}
                </ul>
            </li>
            {% endif %}
            
            <!-- Detailed Reports - Permission-based -->
            {% if permissions.can_view_reports or permissions.can_view_analytics or permissions.can_view_financial_reports or user.is_superuser %}
            <li class="dropdown">
                <a href="javascript:void(0)">
                    <iconify-icon icon="solar:chart-square-bold-duotone" class="menu-icon"></iconify-icon>
                    <span data-i18n="sidebar.reports">Reports</span>
                </a>
                <ul class="sidebar-submenu">
                    {% if permissions.can_view_financial_reports or user.is_superuser %}
                    <li>
                        <a href="{% url 'financial_reports' %}"><i class="ri-circle-fill circle-icon text-success-main w-auto"></i> <span data-i18n="sidebar.financialReports">Financial Reports</span></a>
                    </li>
                    {% endif %}
                    {% if permissions.can_view_reports or permissions.can_view_analytics or user.is_superuser %}
                    <li>
                        <a href="{% url 'order_reports' %}"><i class="ri-circle-fill circle-icon text-primary-600 w-auto"></i> <span data-i18n="sidebar.orderReports">Order Reports</span></a>
                    </li>
                    {% endif %}
                    {% if permissions.can_view_reports or permissions.can_view_analytics or user.is_superuser %}
                    <li>
                        <a href="{% url 'staff_performance' %}"><i class="ri-circle-fill circle-icon text-info-main w-auto"></i> <span data-i18n="sidebar.staffPerformance">Staff Performance</span></a>
                    </li>
                    {% endif %}
                    {% if permissions.can_view_analytics or user.is_superuser %}
                    <li>
                        <a href="{% url 'branch_comparison' %}"><i class="ri-circle-fill circle-icon text-warning-main w-auto"></i> <span data-i18n="sidebar.branchComparison">Branch Comparison</span></a>
                    </li>
                    {% endif %}
                    {% if permissions.can_view_analytics or permissions.can_view_customer_details or user.is_superuser %}
                    <li>
                        <a href="{% url 'customer_analytics' %}"><i class="ri-circle-fill circle-icon text-danger-main w-auto"></i> <span data-i18n="sidebar.customerAnalytics">Customer Analytics</span></a>
                    </li>
                    {% endif %}
                </ul>
            </li>
            {% endif %}
            {% endif %}
            
            <!-- Marketing & Broadcasts - Permission-based -->
            {% if permissions.can_create_marketing_posts or permissions.can_send_branch_broadcasts or permissions.can_send_center_broadcasts or permissions.can_view_broadcast_stats or user.is_superuser or is_owner %}
            <li>
                <a href="{% url 'marketing_list' %}">
                    <iconify-icon icon="mdi:bullhorn" class="menu-icon"></iconify-icon>
                    <span data-i18n="sidebar.marketing">Marketing</span>
                </a>
            </li>
            {% endif %}
            
            <li class="sidebar-menu-group-title" data-i18n="sidebar.uiElements">UI Elements</li>

            <li class="dropdown">
                <a href="javascript:void(0)">
                    <iconify-icon icon="mingcute:storage-line" class="menu-icon"></iconify-icon>
                    <span>Table</span>
                </a>
                <ul class="sidebar-submenu">
                    <li>
                        <a href="{% url 'basicTable' %}"><i class="ri-circle-fill circle-icon text-primary-600 w-auto"></i> Basic Table</a>
                    </li>
                    <li>
                        <a href="{% url 'dataTable' %}"><i class="ri-circle-fill circle-icon text-warning-main w-auto"></i> Data Table</a>
                    </li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="javascript:void(0)">
                    <iconify-icon icon="solar:pie-chart-outline" class="menu-icon"></iconify-icon>
                    <span>Chart</span>
                </a>
                <ul class="sidebar-submenu">
                    <li>
                        <a href="{% url 'lineChart' %}"><i class="ri-circle-fill circle-icon text-danger-main w-auto"></i> Line Chart</a>
                    </li>
                    <li>
                        <a href="{% url 'columnChart' %}"><i class="ri-circle-fill circle-icon text-warning-main w-auto"></i> Column Chart</a>
                    </li>
                    <li>
                        <a href="{% url 'pieChart' %}"><i class="ri-circle-fill circle-icon text-success-main w-auto"></i> Pie Chart</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="{% url 'widgets' %}">
                    <iconify-icon icon="fe:vector" class="menu-icon"></iconify-icon>
                    <span>Widgets</span>
                </a>
            </li>

        </ul>
    </div>
</aside>